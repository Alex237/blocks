# Patricio Gonzalez Vivo - 2015
# From Chapter about Shapes at http://thebookofshaders.com/07/

import: ../functions/aastep.yaml

styles:
    shapes-polygons:
        doc:
            description: |  
                Collection of functions to draw polygons. To learn more about how to make shapes on shaders go to From check [this chapter about shapes from the Book of Shaders](https://thebookofshaders.com/07/)
            examples:
                9845C:
                    url: https://tangrams.github.io/tangram-sandbox/styles/9845C.yaml
                    img: https://tangrams.github.io/tangram-sandbox/styles/9845C.png
                    lines: 153
        mix: [functions-aastep]
        shaders:
            defines:
                PI: 3.14159265358979323846
                TWO_PI: 6.283185307
            blocks:
                global: |
                    // get distance field of a polygon in the center
                    // where N is the number of sides of it
                    // ================================
                    float shapeDF (vec2 st, int N) {
                        st = st *2.-1.;
                        float a = atan(st.x,st.y)+PI;
                        float r = TWO_PI/float(N);
                        return cos(floor(.5+a/r)*r-a)*length(st);
                    }
                    
                    // draw a polygon in the center
                    // where N is the number of sides of it
                    // ================================
                    float shape (vec2 st, int N, float width) {
                        return 1.0-aastep(width,shapeDF(st,N));
                    }